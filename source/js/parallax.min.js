function fullscreenFix(){var a=$("body").height();$(".container").each(function(i){$(this).innerHeight()<=a&&$(this).closest(".slide-inner").addClass("not-overflow")})}function backgroundResize(){var a=$(window).height();$(".background").each(function(i){var t=$(this),e=t.width(),s=t.height(),o=t.attr("data-img-width"),n=t.attr("data-img-height"),r=o/n,c=parseFloat(t.attr("data-diff"));c=c?c:0;var d=0;if(t.hasClass("parallax")&&!$("html").hasClass("touch")){d=a-s}n=s+d+c,o=n*r,e>o&&(o=e,n=o/r),t.data("resized-imgW",o),t.data("resized-imgH",n),t.css("background-size",o+"px "+n+"px")})}function parallaxPosition(a){var i=$(window).height(),t=$(window).scrollTop(),e=t+i,s=(t+e)/2;$(".parallax").each(function(a){var o=$(this),n=o.height(),r=o.offset().top,c=r+n;if(e>r&&c>t){var d=(o.data("resized-imgW"),o.data("resized-imgH")),l=0,h=-d+i,u=i>n?d-n:d-i;r-=u,c+=u;var g=l+(h-l)*(s-r)/(c-r),f=o.attr("data-oriz-pos");f=f?f:"50%",$(this).css("background-position",f+" "+g+"px")}})}"ontouchstart"in window&&(document.documentElement.className=document.documentElement.className+" touch"),$("html").hasClass("touch")||$(".parallax").css("background-attachment","fixed"),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$(".parallax").css("background-attachment","scroll"),$(window).resize(fullscreenFix),fullscreenFix(),$(window).resize(backgroundResize),$(window).focus(backgroundResize),backgroundResize(),$("html").hasClass("touch")||($(window).resize(parallaxPosition),$(window).scroll(parallaxPosition),parallaxPosition());
